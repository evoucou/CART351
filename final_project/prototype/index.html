
<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
  integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
  crossorigin=""></script>
  <!-- <script type="text/javascript" src="map.js"></script> -->
  <link rel="stylesheet" href="main.css"/>
</head>

  <body>
    <div id="header">
    <img src="sources/plus.svg" id="newrequest" onclick="toggleNewReqMenu()"/>
    <img src="sources/logo.svg" id="logo"/><br>
    <form>
  <input type="text" placeholder="search for a request..." name="search" id="searchbar">
</form>
  </div>
      <div id="newReqMenu"><div id="newReqTextBox"><form>
        <input type="text" name="title" placeholder="Type in your request">
        <br><br>
        <input type="text" name="color" placeholder="Choose a color">
        <br><br>
        <input type="text" name="position" placeholder="Current location">
      </form></div></div>
  <div id="map"></div>




    <!--   border-width: 0;

      -moz-box-shadow:    inset 0 0 3px #E6E6E6;
      -webkit-box-shadow: inset 0 0 3px #E6E6E6;
      box-shadow:         inset 0 0 3px #E6E6E6;-->
<script>
var map = L.map('map').locate({setView: true, maxZoom: 13});
//Initially we locate the user's position to load the map around

/*Longitude of Montreal: -73.567256

Latitude of Montreal: 45.5016889*/

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoiZXZvdWNvdSIsImEiOiJjam83ZnJrb3UwZWI2M3FvOW0zNzIwZXRnIn0.2HBTS6fDGxp1pjp54zflnw'
}).addTo(map);

function onLocationFound(e) {

// We then add the pin once the new location has been found
L.marker(e.latlng).addTo(map)
    .bindPopup("Request for Charging Station").openPopup();
}


function createPinCurLoc() {
      //console.log("click");


// We then zoom the position of the user and add a pin.
      //map.locate({setView: true, maxZoom: 18, watch: true});
      map.zoomIn(4, true);

      L.marker(e.latlng).addTo(map)
          .bindPopup("Request for Charging Station").openPopup();
      //map.on('click', onLocationFound);
}

function toggleNewReqMenu() {
  console.log("click");
  var e = document.getElementById("newReqMenu");

if (e.style.display === "none") {
    e.style.display = "block";
} else {
    e.style.display = "none";
}
}

//document.getElementById("newrequest").addEventListener("click", toggleNewReqMenu);




function onLocationError(e) {
    alert(e.message);
}

map.on('locationerror', onLocationError);

</script>

  </body>

  </html>
